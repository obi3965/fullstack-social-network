[{"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\index.js":"1","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\App.js":"2","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\routes\\MainRoute.js":"3","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\pages\\Home.js":"4","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Signup.js":"5","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\auth\\index.js":"6","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\urlConfig.js":"7","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\pages\\Nav.js":"8","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Signin.js":"9","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Users.js":"10","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Profile.js":"11","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\UserApi.js":"12","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\DeleteUser.js":"13","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\EditProfile.js":"14","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\auth\\PrivateRoute.js":"15","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\FollowProfile.js":"16"},{"size":186,"mtime":1612351183265,"results":"17","hashOfConfig":"18"},{"size":292,"mtime":1611832047282,"results":"19","hashOfConfig":"18"},{"size":947,"mtime":1612350763110,"results":"20","hashOfConfig":"18"},{"size":161,"mtime":1611695341043,"results":"21","hashOfConfig":"18"},{"size":4183,"mtime":1612184046195,"results":"22","hashOfConfig":"18"},{"size":1496,"mtime":1611835668178,"results":"23","hashOfConfig":"18"},{"size":49,"mtime":1611744344488,"results":"24","hashOfConfig":"18"},{"size":4027,"mtime":1612127627808,"results":"25","hashOfConfig":"18"},{"size":3050,"mtime":1611835678643,"results":"26","hashOfConfig":"18"},{"size":1810,"mtime":1612284972718,"results":"27","hashOfConfig":"18"},{"size":3786,"mtime":1612391319613,"results":"28","hashOfConfig":"18"},{"size":2871,"mtime":1612391544458,"results":"29","hashOfConfig":"18"},{"size":1360,"mtime":1612134064463,"results":"30","hashOfConfig":"18"},{"size":5937,"mtime":1612352323252,"results":"31","hashOfConfig":"18"},{"size":702,"mtime":1612351475355,"results":"32","hashOfConfig":"18"},{"size":1060,"mtime":1612391504152,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1bilc32",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\index.js",[],["68","69"],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\App.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\routes\\MainRoute.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\pages\\Home.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Signup.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\auth\\index.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\urlConfig.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\pages\\Nav.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Signin.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Users.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\Profile.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\UserApi.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\DeleteUser.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\EditProfile.js",["70","71"],"import React, { Component } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { read, update, updateUser } from \"./UserApi\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport image from \"../images/avatar.png\";\r\nimport { API } from \"../urlConfig\";\r\n\r\nclass EditProfile extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      id: \"\",\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      redirectToProfile: false,\r\n      error: \"\",\r\n      fileSize: 0,\r\n      loading: false,\r\n      about: \"\"\r\n    };\r\n  }\r\n\r\n  init = userId => {\r\n    const token = isAuthenticated().token;\r\n    read(userId, token).then(data => {\r\n      if (data.error) {\r\n        this.setState({ redirectToProfile: true });\r\n      } else {\r\n        this.setState({\r\n          id: data._id,\r\n          name: data.name,\r\n          email: data.email,\r\n          error: \"\",\r\n          about: data.about\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.userData = new FormData();\r\n    const userId = this.props.match.params.userId;\r\n    this.init(userId);\r\n  }\r\n\r\n  isValid = () => {\r\n    const { name, email, password, fileSize,about } = this.state;\r\n    if (fileSize > 1000000) {\r\n      this.setState({\r\n        error: \"File size should be less than 100kb\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    if (name.length === 0) {\r\n      this.setState({ error: \"Name is required\", loading: false });\r\n      return false;\r\n    }\r\n    if (about.length === 0) {\r\n        this.setState({ error: \"about is required\", loading: false });\r\n        return false;\r\n      }\r\n    // email@domain.com\r\n    if (!/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email)) {\r\n      this.setState({\r\n        error: \"A valid Email is required\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    if (password.length >= 1 && password.length <= 5) {\r\n      this.setState({\r\n        error: \"Password must be at least 6 characters long\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ error: \"\" });\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n\r\n    const fileSize = name === \"photo\" ? event.target.files[0].size : 0;\r\n    this.userData.set(name, value);\r\n    this.setState({ [name]: value, fileSize });\r\n  };\r\n\r\n  clickSubmit = event => {\r\n    event.preventDefault();\r\n    this.setState({ loading: true });\r\n\r\n    if (this.isValid()) {\r\n      const userId = this.props.match.params.userId;\r\n      const token = isAuthenticated().token;\r\n\r\n      update(userId, token, this.userData).then(data => {\r\n        if (data.error) {\r\n          this.setState({ error: data.error });\r\n        } else if (isAuthenticated().user.role === \"admin\") {\r\n          this.setState({\r\n            redirectToProfile: true\r\n          });\r\n        } else {\r\n          updateUser(data, () => {\r\n            this.setState({\r\n              redirectToProfile: true\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  signupForm = (name, email, password, about) => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Profile Photo</label>\r\n        <input\r\n          onChange={this.handleChange(\"photo\")}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={this.handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={this.handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">About</label>\r\n        <textarea\r\n          onChange={this.handleChange(\"about\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={about}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={this.handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={this.clickSubmit} className=\"btn btn-raised btn-primary\">\r\n        Update\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      name,\r\n      email,\r\n      password,\r\n      redirectToProfile,\r\n      error,\r\n      loading,\r\n      about\r\n    } = this.state;\r\n\r\n    if (redirectToProfile) {\r\n      return <Redirect to={`/user/${id}`} />;\r\n    }\r\n\r\n    const photoUrl = id\r\n      ? `${API}/user/photo/${id}?${new Date().getTime()}`\r\n      : image;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <h2 className=\"mt-5 mb-5\">Edit Profile</h2>\r\n        <div\r\n          className=\"alert alert-danger\"\r\n          style={{ display: error ? \"\" : \"none\" }}\r\n        >\r\n          {error}\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"jumbotron text-center\">\r\n            <h2>Loading...</h2>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        <img\r\n          style={{ height: \"200px\", width: \"auto\" }}\r\n          className=\"img-thumbnail\"\r\n          src={photoUrl}\r\n          onError={i => (i.target.src = `${image}`)}\r\n          alt={name}\r\n        />\r\n\r\n        {isAuthenticated().user.role === \"admin\" &&\r\n          this.signupForm(name, email, password, about)}\r\n\r\n        {isAuthenticated().user._id === id &&\r\n          this.signupForm(name, email, password, about)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditProfile;","C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\auth\\PrivateRoute.js",[],"C:\\Users\\Administrator\\Desktop\\fullstack\\fullstacksocial-network\\client\\src\\user\\FollowProfile.js",[],{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","severity":1,"message":"77","line":65,"column":17,"nodeType":"78","messageId":"79","endLine":65,"endColumn":18,"suggestions":"80"},{"ruleId":"76","severity":1,"message":"77","line":65,"column":33,"nodeType":"78","messageId":"79","endLine":65,"endColumn":34,"suggestions":"81"},"no-native-reassign",["82"],"no-negated-in-lhs",["83"],"no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["84","85"],["86","87"],"no-global-assign","no-unsafe-negation",{"messageId":"88","fix":"89","desc":"90"},{"messageId":"91","fix":"92","desc":"93"},{"messageId":"88","fix":"94","desc":"90"},{"messageId":"91","fix":"95","desc":"93"},"removeEscape",{"range":"96","text":"97"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"98","text":"99"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"100","text":"97"},{"range":"101","text":"99"},[1665,1666],"",[1665,1665],"\\",[1681,1682],[1681,1681]]